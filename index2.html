<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <style>
       #musicDiv {
           float: left;
           width: 50%;
       }

       #lyricDiv {
           float: right;
           width: 48%;
       }

       iframe {
           width: 600px;
           height: 800px;
           margin-top: 10px;
       }

       a {
           color: blue;
           cursor: pointer;
       }
   </style>
   <title>Spotify</title>
</head>

<body>
   <div id="musicDiv">
       <h1>Enter Artist Name :</h1>
       <input type="text" id="txtArtistName">
       <button id="btnGetTracks">Get Tracks</button>
   </div>
   <div id="lyricDiv">

   </div>
</body>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
   integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script>
   $(document).ready(function () {


       $("#btnGetTracks").on('click',function(e) {

           e.preventDefault();
           var trackArtist = $("<h1>");
           var artistName = $("#txtArtistName").val().trim();
           // alert(artistName)
           trackArtist.text(artistName);
           $("#musicDiv").append(trackArtist);
           var queryUrl =
               // 'https://api.musixmatch.com/ws/1.1/track.search?q_artist='+artistName+'&page_size=10&page=1&s_track_rating=desc&apikey=71f00284b464247092304a810bf79866'
                'https://api.musixmatch.com/ws/1.1/artist.search?q_artist=' +artistName+'&page_size=5&apikey=e5aafa8379a4815649b87b5dad12d107'

           $.ajax({
               url: "https://cors-anywhere.herokuapp.com/" + queryUrl,
               method: 'GET',
           }).then(function (response) {
               var obj = JSON.parse(response);
               console.log(obj);
               // loop to display all tracks of the artist
               for (var i = 0; i < obj.message.body.artist_list.length; i++) {
                   var iframeTrack = $("<iframe>");
                    
                   var artistInfo = $("#txtArtistInfo").val().trim();

                   var trackAlbumName = $("<h2>");
                   var trackName = $("<p>");

                   // trackArtist.text("Track Artist Name : " + obj.message.body.track_list[i]
                   //     .track
                   //     .artist_name)

                   artistInfo.text("Artist Info : " + obj.message.body.artist_list[i].artist
                        .artist_id);
                        

                   trackAlbumName.text("Track Album Name : " + obj.message.body.track_list[i]
                       .track
                       .album_name);
                   trackName.text("Track Name : " + obj.message.body.track_list[i].track
                       .track_name);

                   $("#musicDiv").append(trackAlbumName, trackName);
                   // trackArtist
                    // This will add anchor tag and trigger click of that  tag and display lyric in lyricDiv
                   var trackUrl = $("<a>", {
                       'id': 'trackUrl',
                       'data-trackUrl': obj.message.body.track_list[i].track
                           .track_share_url
                   }).text("Click Me to play").click(function () {
                       var trackDisplayUrl = $(this).attr('data-trackUrl');
                       iframeTrack.attr('src', trackDisplayUrl);
                       $("#lyricDiv").append(iframeTrack);
                   });


                   $("#musicDiv").append(trackUrl);

               }
               $("#musicDiv").trigger("click");
               console.log("done");

           });
       })

   })
</script>

</html>